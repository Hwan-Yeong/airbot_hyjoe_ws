
<!--
This Behavior Tree replans the global path periodically at 1 Hz and it also has
recovery actions specific to planning / control as well as general system issues.
This will be continuous if a kinematically valid planner is selected.
-->
<root main_tree_to_execute="MainTree">
	<BehaviorTree ID="MainTree">
		<RecoveryNode number_of_retries="2" name="NavigateRecovery">
			<PipelineSequence name="NavigateWithReplanning">
				<RateController hz="1.0">
					<RecoveryNode number_of_retries="1" name="ComputePathToPose">
						<ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>
						<Sequence name="ClearingGlobal">
							<ClearCostmapExceptRegion  name="ClearGlobalCostmap-Subtree1" service_name="global_costmap/clear_except_global_costmap"/>
							<ClearCostmapAroundRobot  name="ClearGlobaalCostmap-Subtree2" service_name="global_costmap/clear_around_global_costmap"/>
						</Sequence>
					</RecoveryNode>
				</RateController>
				<RecoveryNode number_of_retries="1" name="FollowPath">
					<FollowPath path="{path}" controller_id="FollowPath"/>
					<Sequence name="ClearingLocal">
						<ClearCostmapExceptRegion name="ClearLocalCostmap-Subtree3" service_name="local_costmap/clear_except_local_costmap"/>
						<ClearCostmapAroundRobot  name="ClearLocalCostmap-Subtree4" service_name="local_costmap/clear_around_local_costmap"/>
					</Sequence>
				</RecoveryNode>
			</PipelineSequence>
			<ReactiveFallback name="RecoveryFallback">
				<GoalUpdated/>
				<RoundRobin name="RecoveryActions">
					<Sequence name="ClearingActions">
						<ClearEntireCostmap name="ClearLocalCostmap-Subtree" service_name="local_costmap/clear_entirely_local_costmap"/>
						<ClearEntireCostmap name="ClearGlobalCostmap-Subtree" service_name="global_costmap/clear_entirely_global_costmap"/>
					</Sequence>
				</RoundRobin>
			</ReactiveFallback>
		</RecoveryNode>
	</BehaviorTree>
</root>
